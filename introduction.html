<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Study Space — Introduction</title>
  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,600,700,800&display=swap" rel="stylesheet" />
  <style>
    :root{
      --accent:#a7c8ff;
      --accent-dark:#eaf2ff;
      --gap:clamp(12px,1.6vw,20px);
      --p: 0;
      --dim: 0.5;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      color:var(--accent-dark);
      background:#000;
      min-height:100vh;
    }

    /* Topbar (minimal) */
    .topbar{display:flex;align-items:center;justify-content:space-between;padding:clamp(14px,2.6vw,28px) clamp(18px,4vw,56px);position:sticky;top:0;z-index:10;background:linear-gradient(180deg, rgba(5,11,20,0.65), rgba(5,11,20,0.25));border-bottom:1px solid rgba(255,255,255,0.08);backdrop-filter:saturate(120%) blur(8px);transition: background .25s ease, box-shadow .25s ease, border-color .25s ease, transform .35s ease, opacity .25s ease}
    .topbar.scrolled{background:linear-gradient(180deg, rgba(5,11,20,0.85), rgba(5,11,20,0.35));border-bottom-color: rgba(255,255,255,0.12);box-shadow:0 8px 24px rgba(2,18,40,0.25)}
    .topbar.hide{ transform: translateY(-120%); opacity: 0; pointer-events: none; }
    .brand{display:flex;align-items:center;gap:10px;text-decoration:none;color:#e9f5ff;font-weight:800;letter-spacing:0.4px;font-size:clamp(18px,2.4vw,24px)}
    .brand-badge{width:36px;height:36px;border-radius:50%;background:linear-gradient(90deg,#4f7bff,#00a0ff);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:800}
    .nav-actions{display:flex;align-items:center;gap:10px}
    .btn{border:0;background:transparent;color:#cfe2ff;text-decoration:none;font-weight:700;padding:8px 12px;border-radius:10px;transition:opacity .2s}
    .btn:hover{opacity:.9}
    .btn.primary{color:#fff;text-decoration:underline}

    /* Sticky hero: only big words */
    .sticky-hero{height:120vh}
    .sticky-inner{position:sticky;top:0;min-height:80vh;display:grid;place-items:center;padding:clamp(16px,4vw,48px)}
    .hero-shell{position:relative;width:min(1200px,100%);padding:clamp(8px,2vw,16px)}
    .hero-title{
      margin:0;line-height:.92;text-align:center;color:#ffffff;
      letter-spacing:calc((1 - var(--p)) * 2.5px);
      transform:none; /* center-locked */
      transform-origin:center;
      
      transition:letter-spacing .15s linear;
      will-change:letter-spacing;
      text-shadow:0 2px 22px rgba(0,10,30,0.5)
    }
    .hero-title span{display:block;font-weight:800;font-size:clamp(48px, 14vw, 180px)}
    /* typed caret */
    .hero-title .typed{display:inline-block;position:relative}
    .hero-title .typed::after{content:'';display:inline-block;width:.08em;height:.9em;background:#fff;margin-left:.08em;vertical-align:-.06em;border-radius:1px;animation:caretBlink 1s steps(1) infinite}
    @keyframes caretBlink{50%{opacity:0}}

    /* Enhancements: fade hero on scroll and remove banding lines */
    .hero-shell{ opacity: calc(1 - min(var(--p), 1) * 0.98); transition: opacity .2s linear; }

    /* Make the topbar edge less visible */
    .topbar{ border-bottom-color: rgba(255,255,255,0.04); box-shadow: 0 6px 24px rgba(2,18,40,0.12); }
    .topbar.scrolled{ border-bottom-color: rgba(255,255,255,0.06); box-shadow: 0 10px 28px rgba(2,18,40,0.22); }

    /* Ensure hero can be fully hidden */
    .hero-shell.gone{ opacity:0 !important; visibility:hidden !important; pointer-events:none }

    /* Title scene with big statement */
    .title-scene{ height:120vh; margin-top:-12vh }
    .title-sticky{ position:sticky; top:0; min-height:100vh; display:grid; place-items:center; padding:clamp(16px,4vw,48px); overflow:visible; perspective:1600px }
    .title-stage{ position:relative; width:min(1100px,100%); display:flex; flex-direction:column; align-items:center; gap:clamp(28px,4vw,72px); perspective:1600px }
    .big-title{ position:relative; z-index:3; margin:0; text-align:center; color:#fff; font-weight:900; line-height:1.08; font-size:clamp(32px,6.5vw,88px); letter-spacing:.2px; text-wrap:balance }
    .big-title .word-easy{ position:relative; display:inline-block; padding-bottom:.12em }
    .big-title .word-easy::after{ content:''; position:absolute; left:0; bottom:-.05em; height:.1em; width:100%; background:#fff; border-radius:999px; transform-origin:left center; transform:scaleX(var(--ul,0)); transition:transform .08s linear }

    .info-section{ padding:clamp(48px,8vw,120px) clamp(22px,6vw,120px); margin-top:clamp(80px,12vw,180px); display:flex; align-items:center; justify-content:center; opacity:0; transform:translateY(80px); transition:opacity .6s ease, transform .6s ease; pointer-events:none }
    .info-section.is-visible{ opacity:1; transform:translateY(0); pointer-events:auto }
    .info-content{ max-width:min(860px,92vw); text-align:center; color:#fff; display:flex; flex-direction:column; gap:clamp(18px,3vw,28px) }
    .info-content h2{ margin:0; font-size:clamp(30px,5.6vw,76px); line-height:1.08; font-weight:800; letter-spacing:0.2px }
    .info-content p{ margin:0; color:rgba(225,235,255,0.82); font-size:clamp(17px,2vw,22px); line-height:1.68 }

    .glass-preview{ position:relative; width:min(760px,84vw); padding:clamp(18px,3.8vw,32px); border-radius:26px; background:linear-gradient(135deg, rgba(32,58,102,0.36), rgba(16,32,60,0.58)); border:1px solid rgba(255,255,255,0.08); box-shadow:0 32px 72px rgba(3,9,20,0.46); backdrop-filter:blur(22px) saturate(140%); pointer-events:none; transform:translate3d(0,140px,-240px) scale(0.78) rotateX(16deg) rotateY(-6deg); opacity:0; will-change:transform,opacity; transition:transform 1.1s cubic-bezier(.18,.82,.25,1), opacity .9s ease, box-shadow 1.1s ease; margin-bottom:clamp(18px,3vw,40px); overflow:hidden }
    .glass-preview::after{ content:''; position:absolute; inset:0; border-radius:inherit; background:radial-gradient(120% 120% at 20% 10%, rgba(140,185,255,0.24), transparent 55%); opacity:.3; pointer-events:none; transition:opacity .8s ease }
    .glass-preview::before{ content:''; position:absolute; inset:0; border-radius:inherit; mask-image:linear-gradient(110deg, rgba(0,0,0,0) 38%, rgba(0,0,0,1) 48%, rgba(0,0,0,0) 60%); background:linear-gradient(120deg, rgba(255,255,255,0) 35%, rgba(255,255,255,0.3) 50%, rgba(255,255,255,0) 65%); opacity:0; transform:translateX(-60%); pointer-events:none; mix-blend-mode:screen }
    .glass-preview img{ width:100%; display:block; border-radius:clamp(14px,2.8vw,24px); box-shadow:0 18px 34px rgba(5,12,30,0.45) }
    .title-stage.is-active .glass-preview{ opacity:1; transform:translate3d(0,-12px,-80px) scale(0.94) rotateX(6deg) rotateY(-3.5deg) }
    .title-stage.is-active .glass-preview::after{ opacity:.48 }
    .title-stage.is-tilted .glass-preview{ transform:translate3d(0,-6px,0) scale(1) rotateX(2deg) rotateY(-7deg) rotateZ(-1.2deg); box-shadow:0 50px 90px rgba(4,12,28,0.55) }
    .title-stage.is-tilted .glass-preview::before{ animation:glint 2.2s ease-out forwards }

    @keyframes glint{
      0%{ transform:translateX(-60%); opacity:0 }
      25%{ opacity:.42 }
      55%{ opacity:.16 }
      100%{ transform:translateX(65%); opacity:0 }
    }

    @media (prefers-reduced-motion: reduce){
      .word{transition:none !important}
      .info-section{transition:none !important; opacity:1 !important; transform:none !important; pointer-events:auto}
    }
  </style>
</head>
<body>
  <header class="topbar">
    <a class="brand" href="homepage.html" title="Go to Home">
      <span class="brand-badge">SS</span>
      <span>Study Space</span>
    </a>
    <nav class="nav-actions">
      <a class="btn" href="../log-in.html">Log in</a>
      <a class="btn primary" href="../sign-in.html">Sign up</a>
    </nav>
  </header>

  <!-- Sticky hero with only the three words -->
  <section class="sticky-hero" id="stickyHero">
    <div class="sticky-inner">
      <div class="hero-shell">
        <h1 class="hero-title" aria-label="Organise. Focus. Grow.">
          <span id="typed" class="typed" aria-live="polite" aria-atomic="true"></span>
        </h1>
      </div>
    </div>
  </section>

  <!-- Big title scene with underline animation -->
  <section class="title-scene" id="titleScene">
    <div class="title-sticky">
      <div class="title-stage">
        <div class="glass-preview" id="glassPreview" aria-hidden="true">
          <img src="picture1.png" alt="Study Space dashboard displaying a clean interface with task lists, progress bars, and study statistics organized in a modern card-based layout against a dark background" loading="lazy" />
        </div>
        <h1 class="big-title">
          Study Space makes studying <span id="easyWord" class="word-easy">easy</span>
        </h1>
      </div>
    </div>
  </section>

  <section class="info-section" id="productivityCopy">
    <div class="info-content">
      <h2>Custom blocks for maximum productivity</h2>
      <p>Curate the tools you reach for every day so your dashboard always matches the way you study. Add shortcuts, timers, checklists, and more without breaking your flow.</p>
      <p>It’s all about flexibility—pin music for quick motivation, surface your next handout, or outline the assignments that need attention. Everything lives in one clean view so you stay organised, focused, and ready for what’s next.</p>
    </div>
  </section>

  <script>
    // Minimal scroll logic for hero only + typing loop + title underline
    const sticky = document.getElementById('stickyHero');
    const topbar = document.querySelector('.topbar');
    const typedEl = document.getElementById('typed');
    const heroShell = document.querySelector('.hero-shell');

    const titleScene = document.getElementById('titleScene');
    const easyWord = document.getElementById('easyWord');
    const titleStage = document.querySelector('.title-stage');
    const infoSection = document.getElementById('productivityCopy');

    const words = ['Organise.', 'Focus.', 'Grow.'];
    let heroProgressValue = 0;
    let wi = 0, ci = 0; // word index, char index
    let deleting = false, paused = false, stopTyping = true;
    let typingTimer = null;
    let holdTimer = null;

    function clamp01(x){ return Math.max(0, Math.min(1, x)); }
    function ease(t){ return t*t*(3-2*t); }

    function heroProgress(){
      const total = sticky.offsetHeight - window.innerHeight;
      const rect = sticky.getBoundingClientRect();
      const within = Math.min(Math.max(-rect.top, 0), total);
      return total > 0 ? within / total : 0;
    }

    function sectionProgress(el){
      const total = el.offsetHeight - window.innerHeight;
      const rect = el.getBoundingClientRect();
      const within = Math.min(Math.max(-rect.top, 0), total);
      return total > 0 ? within / total : 0;
    }

    function animateHero(){
      const p = heroProgress();
      heroProgressValue = p;
      const eased = ease(clamp01(p));
      document.documentElement.style.setProperty('--p', eased.toFixed(4));
      // Fully hide hero once halfway through the section
      if(p >= 0.5){ heroShell.classList.add('gone'); } else { heroShell.classList.remove('gone'); }
    }

    function animateTitle(){
      const p = sectionProgress(titleScene);
      // Drive underline growth; starts soon after entering scene
      const ul = clamp01(p * 1.3);
      easyWord.style.setProperty('--ul', ul.toFixed(3));
      const eased = ease(clamp01(p));
      if(titleStage){
        titleStage.classList.toggle('is-active', eased > 0.06);
        titleStage.classList.toggle('is-tilted', eased > 0.66);
      }
    }

    function schedule(nextIn){
      if(stopTyping) return;
      if(typingTimer){ clearTimeout(typingTimer); }
      typingTimer = setTimeout(typeTick, nextIn);
    }

    function clearHoldTimer(){
      if(holdTimer){
        clearTimeout(holdTimer);
        holdTimer = null;
      }
    }

    function queueHold(delay){
      clearHoldTimer();
      holdTimer = setTimeout(()=>{
        holdTimer = null;
        if(stopTyping) return;
        paused = false;
        deleting = true;
        schedule(80);
      }, delay);
    }

    function sectionIsNearView(el, threshold = 0.65){
      if(!el) return false;
      const rect = el.getBoundingClientRect();
      return rect.top < window.innerHeight * threshold;
    }

    function typeTick(){
      typingTimer = null;
      if(stopTyping) return;
      const current = words[wi];

      if(paused){ schedule(120); return; }

      if(!deleting){
        ci++;
        typedEl.textContent = current.slice(0, ci);
        if(ci >= current.length){
          paused = true;
          // Hold full word for ~3s while still in view
          queueHold(3000);
          return;
        }
        schedule(110);
      } else {
        ci--;
        typedEl.textContent = current.slice(0, Math.max(0, ci));
        if(ci <= 0){
          deleting = false;
          wi = (wi + 1) % words.length;
          schedule(160);
          return;
        }
        schedule(70);
      }
    }

    function setTypingEnabled(active){
      if(reduceMotion) return;
      if(active){
        if(stopTyping){
          stopTyping = false;
          if(paused && !holdTimer){ queueHold(800); }
          schedule(typingTimer ? 110 : 200);
        }
      } else if(!stopTyping){
        stopTyping = true;
        if(typingTimer){ clearTimeout(typingTimer); typingTimer = null; }
        clearHoldTimer();
      }
    }

    const reduceMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    let lastY = window.scrollY || 0;

    function onScroll(){
      if(!reduceMotion){
        animateHero();
        animateTitle();
        const rect = heroShell.getBoundingClientRect();
        const heroVisible = !heroShell.classList.contains('gone') && rect.bottom > 0 && rect.top < window.innerHeight;
        setTypingEnabled(heroVisible);
        if(infoSection){
          const heroDone = heroProgressValue >= 0.98;
          if(heroDone && sectionIsNearView(infoSection, 0.9)){
            infoSection.classList.add('is-visible');
          } else {
            infoSection.classList.remove('is-visible');
          }
        }
      }
      
      // Smart hide navbar
      const y = window.scrollY || 0;
      const down = y > lastY + 1; const up = y < lastY - 1;
      if(y > 1){ topbar.classList.add('scrolled'); } else { topbar.classList.remove('scrolled'); }
      if(down && y > 0){ topbar.classList.add('hide'); }
      if(up || y <= 0){ topbar.classList.remove('hide'); }
      lastY = y;
    }

    // Init
    typedEl.textContent = '';
    if(reduceMotion){
      stopTyping = true;
      typedEl.textContent = words[0];
      if(infoSection){ infoSection.classList.add('is-visible'); }
    }
    onScroll();
    window.addEventListener('scroll', ()=> requestAnimationFrame(onScroll), { passive:true });
    window.addEventListener('resize', ()=> requestAnimationFrame(onScroll));
  </script>
</body>
</html>
